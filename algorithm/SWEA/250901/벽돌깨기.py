T = int(input())
for t in range(1,T+1):
    N,W,H = map(int,input().split())
    A = [list(map(int,input().split())) for _ in range(H)]
    
    ans = 0

    dr = [0,0,-1,1]
    dc = [-1,1,0,0]

    def in_range(r,c):
        return 0 <= r < H and 0 <= c < W
    

    def bomb(r,c,K):
        cnt 
        if K > 1:
            for k in range(1,K): 
                for p in range(4):
                    nr = r+dr[p]*(k)
                    nc = c+dc[p]*(k)
                    nk = A[nr][nc]
                    if in_range(nr,nc) and nk != 0:
                        if nk == 1:
                            cnt += 1
                            for x in range(r,-1,-1):
                                if A[x][nc] == 0:
                                    break
                                A[x][nc] = A[x-1][nc]

                        else:
                            bomb(nr,nc,nk)
        else:
            cnt += 1




    for _ in range(N):
        for j in range(W):
            for i in range(H):
                if A[i][j] != 0:
                    bomb(i,j,A[i][j])
        
        if ans < cnt:
            ans = cnt





    print(f'#{t} {ans}')











'''
5
3 10 10
0 0 0 0 0 0 0 0 0 0
1 0 1 0 1 0 0 0 0 0
1 0 3 0 1 1 0 0 0 1
1 1 1 0 1 2 0 0 0 9
1 1 4 0 1 1 0 0 1 1
1 1 4 1 1 1 2 1 1 1
1 1 5 1 1 1 1 2 1 1
1 1 6 1 1 1 1 1 2 1
1 1 1 1 1 1 1 1 1 5
1 1 7 1 1 1 1 1 1 1
2 9 10
0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0
0 1 0 0 0 0 0 0 0
0 1 0 0 0 0 0 0 0
1 1 0 0 1 0 0 0 0
1 1 0 1 1 1 0 1 0
1 1 0 1 1 1 0 1 0
1 1 1 1 1 1 1 1 0
1 1 3 1 6 1 1 1 1
1 1 1 1 1 1 1 1 1
3 6 7
1 1 0 0 0 0
1 1 0 0 1 0
1 1 0 0 4 0
4 1 0 0 1 0
1 5 1 0 1 6
1 2 8 1 1 6
1 1 1 9 2 1
4 4 15
0 0 0 0 
0 0 0 0 
0 0 0 0 
1 0 0 0 
1 0 0 0 
1 0 0 0 
1 0 0 0 
1 0 5 0 
1 1 1 0 
1 1 1 9 
1 1 1 1 
1 6 1 2 
1 1 1 5 
1 1 1 1 
2 1 1 2 
4 12 15
9 9 9 9 9 9 9 9 9 9 9 9
9 9 9 9 9 9 9 9 9 9 9 9
9 9 9 9 9 9 9 9 9 9 9 9
9 9 9 9 9 9 9 9 9 9 9 9
9 9 9 9 9 9 9 9 9 9 9 9
9 9 9 9 9 9 9 9 9 9 9 9
9 9 9 9 9 9 9 9 9 9 9 9
9 9 9 9 9 9 9 9 9 9 9 9
9 9 9 9 9 9 9 9 9 9 9 9
9 9 9 9 9 9 9 9 9 9 9 9
9 9 9 9 9 9 9 9 9 9 9 9
9 9 9 9 9 9 9 9 9 9 9 9
9 9 9 9 9 9 9 9 9 9 9 9
9 9 9 9 9 9 9 9 9 9 9 9
9 9 9 9 9 9 9 9 9 9 9 9
'''